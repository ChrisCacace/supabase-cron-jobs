name: Minute Test

on:
  schedule:
    - cron: '* * * * *'  # Every minute
  workflow_dispatch:

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - name: Print diagnostic info
        run: |
          echo "ðŸ” MINUTE CRON TEST"
          echo "=================="
          echo "Event: ${{ github.event_name }}"
          echo "Time: $(date -u)"
          echo "Repository: ${{ github.repository }}"
          echo "Branch: ${{ github.ref_name }}"
          echo ""
          
          if [ "${{ github.event_name }}" = "schedule" ]; then
            echo "âœ… SCHEDULED RUN DETECTED!"
            echo "Cron job is working correctly."
          else
            echo "âš ï¸  MANUAL TRIGGER"
            echo "This was triggered manually, not by cron."
          fi
          
          echo ""
          echo "ðŸ“… Next scheduled run should be in ~1 minute"
          echo "ðŸ• Current UTC time: $(date -u)"
          
      - name: Create timestamp file
        run: |
          echo "Last run: $(date -u)" > timestamp.txt
          echo "Event: ${{ github.event_name }}" >> timestamp.txt
          echo "Run ID: ${{ github.run_id }}" >> timestamp.txt
          
      - name: Upload timestamp as artifact
        uses: actions/upload-artifact@v3
        with:
          name: timestamp-${{ github.run_id }}
          path: timestamp.txt 